# 부록 C. 넘파이 속성 과정

- 오픈소스 넘파이(Numpy) 라이브러리는 동일한 유형의 n차원 배열을 저장하는 강력한 ndarray 객체를 제공하는 라이브러리입니다.
- 넘파이 라이브러리에 대한 기본 지식은 판다스의 원리를 이해하는데 도움이 됩니다.



## 01. 차원

- 차원(dimension)은 자료구조에서 단일 값을 추출할 때 필요한 참조점의 수를 나타냅니다

|     도시     | 기온 |
| :----------: | :--: |
|     뉴욕     |  38  |
|    시카고    |  36  |
| 샌프란시스코 |  51  |
|   마이애미   |  73  |

- 이 데이터셋에서 특정 기온을 찾으려면 도시이름 또는 순서만 참조하면 됩니다. 따라서 테이블은 1차원 데이터셋을 나타냅니다.

|     도시     | 월요일 | 화요일 | 수요일 | 목요일 | 금요일 |
| :----------: | :----: | :----: | :----: | :----: | :----: |
|     뉴욕     |   38   |   41   |   35   |   32   |   35   |
|    시카고    |   36   |   39   |   31   |   27   |   25   |
| 샌프란시스코 |   51   |   52   |   50   |   49   |   53   |
|   마이애미   |   73   |   74   |   72   |   71   |   74   |

- 이 데이터셋에서 특정 값을 추출할려면 도시와 요일이 필요합니다. 따라서 이 데이터셋은 2차원입니다.

- 1주차

|     도시     | 월요일 | 화요일 | 수요일 | 목요일 | 금요일 |
| :----------: | :----: | :----: | :----: | :----: | :----: |
|     뉴욕     |   38   |   41   |   35   |   32   |   35   |
|    시카고    |   36   |   39   |   31   |   27   |   25   |
| 샌프란시스코 |   51   |   52   |   50   |   49   |   53   |
|   마이애미   |   73   |   74   |   72   |   71   |   74   |

- 2주차

|     도시     | 월요일 | 화요일 | 수요일 | 목요일 | 금요일 |
| :----------: | :----: | :----: | :----: | :----: | :----: |
|     뉴욕     |   40   |   42   |   38   |   36   |   28   |
|    시카고    |   32   |   28   |   25   |   31   |   25   |
| 샌프란시스코 |   49   |   55   |   54   |   51   |   48   |
|   마이애미   |   75   |   78   |   73   |   76   |   71   |

- 이 데이터셋에서는 주차, 도시와 요일이 필요하기 때문에 3차원입니다.



## 02. ndarray 객체

```python
import numpy as np
```

- 넘파이는 무작위 또는 지정된 데이터를 생성할 때 유용합니다.

### 2.1 arange 메서드

- arange 함수는 일련의 숫자 값이 있는 범위를 나타내는 1차원 ndarray 객체를 반환합니다. 하나의 인수를 전달하여 arange 함수를 호출하면 넘파이는 범위가 시작되는 값인 0을 하한으로 설정하고 첫번째 인수를 범위가 끝나는 숫자인 상한으로 설정합니다. 범위는 해당 범위까지 계산하지만 상한 값은 결과에 포함되지 않습니다.

```python
np.arange(3)
```

```
array([0, 1, 2])
```

- 범위의 하한과 상한을 선언하는 2개의 인수를 전달할 수 도 있습니다.

```python
# 다음 두 줄의 결과는 같습니다.
np.arange(2, 6)
np.arange(start = 2, stop = 6)
```

```
array([2, 3, 4, 5])
```

- arange 함수의 세번째 매개변수 step은 선택사항으로 두 값 사이의 간격을 설정합니다.

```python
np.arange(start = 0, stop = 111, step = 10)
```

```
array([  0,  10,  20,  30,  40,  50,  60,  70,  80,  90, 100, 110])
```

```python
tens = np.arange(start = 0, stop = 111, step = 10)
```



### 2.2 ndarray 객체의 속성

- shape 속성은 배열의 차원을 나타내는 튜플을 반환합니다. shape 튜플의 길이는 ndarray의 차원 수와 같습니다. 다음 출력을 보면  tens가 12개의 값을 갖는 1차원 배열임을 확인할 수 있습니다.

```python
tens.shape
```

```
(12,)
```

- ndim 속성을 사용하여 ndarray의 차원 수를 확인할 수도 있습니다.

```python
tens.ndim
```

```
1
```

- size 속성은 배열의 요소 개수를 반환합니다.

```python
tens.size
```

```
12
```



### 2.3 reshape 메서드

```python
tens
```

```
array([  0,  10,  20,  30,  40,  50,  60,  70,  80,  90, 100, 110])
```

- reshape 메서드는 인수를 받아 지정된 형태를 가진 새 ndarray 객체를 반환합니다.

```python
tens.reshape(4, 3)
```

```
array([[  0,  10,  20],
       [ 30,  40,  50],
       [ 60,  70,  80],
       [ 90, 100, 110]])
```

- reshape에 전달한 인수의 개수는 새로운 ndarray의 차원 수와 같습니다.

```python
tens.reshape(4, 3).ndim
```

```
2
```

- 인수를 모두 곱했을 때 기존 배열 요소 개수와 동일해야 합니다.  4*3=12

```python
tens.reshape(2, 6)
```

```
array([[  0,  10,  20,  30,  40,  50],
       [ 60,  70,  80,  90, 100, 110]])
```

- 넘파이는 기존 배열을 요청한 형태로 변형할 수 없는 경우 예외를 발생시킵니다. 12개의 값을 2*5 배열로 변환할 수 없습니다.

```python
tens.reshape(2, 5)
```

```
ValueError
```

- 3차원 배열

```python
tens.reshape(2, 3, 2)
```

```
array([[[  0,  10],
        [ 20,  30],
        [ 40,  50]],

       [[ 60,  70],
        [ 80,  90],
        [100, 110]]])
```

```python
tens.reshape(2, 3, 2).ndim
```

```
3
```

- reshape에 인수로 -1을 전달하여 알 수 없는 차원을 채워넣을 수도 있습니다. 넘파이는 주어진 차원 내에서 -1로 전달한 차원에 맞는 차원을 유추합니다. 넘파이는 2*6 형태여야 한다고 계산합니다.

```python
tens.reshape(2, -1)
```

```
array([[  0,  10,  20,  30,  40,  50],
       [ 60,  70,  80,  90, 100, 110]])
```

```python
tens.reshape(2, -1, 2)
```

```
array([[[  0,  10],
        [ 20,  30],
        [ 40,  50]],

       [[ 60,  70],
        [ 80,  90],
        [100, 110]]])
```

- reshape 메서드에는 알 수 없는 차원을 하나만 전달할 수 있습니다.
- reshape 메서드는 새로운 ndarray 객체를 반환합니다. 원본 배열은 변경되지 않습니다.



### 2.4 randint 함수

- randint 함수는 범위 사이에서 하나 이상의 난수를 생성합니다. 인수를 하나만 전달하면 0에서 주어진 인수까지의 범위 안에서 임의의 정수를 반환합니다.

```python
np.random.randint(5)
```

```
1
```

- randint에 인수를 2개 전달하면 결과에 포함되는 하한과 상한을 설정할 수 있습니다. 상한 값을 결과에서 제외합니다.

```python
np.random.randint(1, 10)
```

```
3
```

- 세번째 인수에 원하는 배열 형태를 지정할 수 있습니다.

```python
np.random.randint(1, 10, 3)
```

```
array([1, 1, 9])
```

```python
np.random.randint(1, 10, [3])
```

```
array([2, 6, 1])
```

```python
np.random.randint(1, 10, [3, 5])
```

```
array([[6, 3, 8, 7, 6],
       [8, 1, 5, 5, 7],
       [7, 6, 3, 2, 1]])
```



### 2.5 randn 함수

- randn 함수는 표준 정규 분포에서 생성한 난수 ndarray를 반환합니다. 함수의 각 순차 인수는 차원에 저장할 값의 수를 결정합니다.

```python
np.random.randn(3)
```

```
array([ 1.67658384, -1.05860167, -1.42641176])
```

```python
np.random.randn(2, 4)
```

```
array([[-0.76866623,  0.87848456,  1.35702096,  0.16849181],
       [-0.56814378, -0.13010028, -1.17639784,  0.65073416]])
```

```python
np.random.randn(2, 4, 3)
```

```
array([[[ 0.65199935,  0.64360149, -0.35661454],
        [ 1.32089981, -0.54727642, -0.89419161],
        [ 1.39818109,  0.09864683,  0.18492125],
        [-0.7265768 , -0.22893182,  0.99778759]],

       [[ 1.94208936,  1.41678737, -0.46784409],
        [ 0.33663641,  0.03957774,  0.68272607],
        [ 0.4806167 ,  0.52766848,  0.25761397],
        [ 0.65039129, -0.04511077,  0.22099265]]])
```

- rand 계열의 함수는 가짜 숫자 데이터를 생성하는 멋진 솔루션입니다.



## 03. nan 객체

- 넘파이 라이브러리는 특별한 nan 객체를 사용하여 누락되거나 잘못된 값을 나타냅니다. nan은 숫자가 아니라는 의미를 나타내는 'not a number'의 줄임말로 누락된 데이터를 나타내는 포괄적인 용어입니다. 

```python
np.nan
```

```
nan
```

- nan 객체는 어던 값과도 같지 않습니다.

```python
np.nan == 5
```

```
False
```

- nan 값도 다른 nan 값과 같지 않습니다. 넘파이 관점에서 nan 값은 누락됐거나 없는 값이기 때문에 서로 같은 값인지 알 수 없으며 서로 다르다고 간주합니다.

```python
np.nan == np.nan
```

```
False
```

